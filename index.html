<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Bible Reader</title>
  <link rel="stylesheet" href="css/jquery-ui.css">
  <script src="js/jquery.js"></script>
  <script src="js/jquery-ui.js"></script>
  <script>
  var reading = 
	[
		// December
		{ date: "1/12", books: "Deut:29-30,Act:2,Ps:41" },
		{ date: "2/12", books: "Deut:31-32,Act:3,Ps:42" },
		{ date: "3/12", books: "Deut:33-34,Act:4,Ps:43" },
		{ date: "4/12", books: "Nav:1-2,Act:5,Ps:44" },
		{ date: "5/12", books: "Nav:3-4,Act:6,Ps:45" },
		{ date: "6/12", books: "Nav:5-6,Act:7,Ps:46" },
		{ date: "7/12", books: "Nav:7-8,Act:8,Ps:47" },
		{ date: "8/12", books: "Nav:9-10,Act:9,Ps:48" },
		{ date: "9/12", books: "Nav:11-12,Act:10,Ps:49" },
		{ date: "10/12", books: "Nav:13-14,Act:11,Ps:50" },
		{ date: "11/12", books: "Nav:15-16,Act:12,Ps:51" },
		{ date: "12/12", books: "Nav:17-18,Act:13,Ps:52" },
		{ date: "13/12", books: "Nav:19-20,Act:14,Ps:53" },
		{ date: "14/12", books: "Nav:21-22,Act:15,Ps:54" },
		{ date: "15/12", books: "Nav:23-24,Act:16,Ps:55" },
		{ date: "16/12", books: "Judg:1-2,Act:17,Ps:56" },
		{ date: "17/12", books: "Judg:3-4,Act:18,Ps:57" },
		{ date: "18/12", books: "Judg:5-6,Act:19,Ps:58" },
		{ date: "19/12", books: "Judg:7-8,Act:20,Ps:59" },
		{ date: "20/12", books: "Judg:9-10,Act:21,Ps:60" },
		{ date: "21/12", books: "Judg:11-12,Act:22,Ps:61" },
		{ date: "22/12", books: "Judg:13-14,Act:23,Ps:62" },
		{ date: "23/12", books: "Judg:15-16,Act:24,Ps:64" },
		{ date: "24/12", books: "Judg:17-18,Act:25,Ps:65" },
		{ date: "25/12", books: "Judg:19-20,Act:26,Ps:66" },
		{ date: "26/12", books: "Judg:21-22,Act:27,Ps:67" },
		{ date: "27/12", books: "Ruth:1-2,Act:28,Ps:68" },
		{ date: "28/12", books: "Ruth:3-4,Jac:1,Ps:69" },
		{ date: "29/12", books: "1Sam:1-2,Jac:2,Ps:70" },
		{ date: "30/12", books: "1Sam:3-4,Jac:3,Ps:71" },
		{ date: "31/12", books: "1Sam:5-6,Jac:4,Ps:72" },
		
		// January
		{ date: "1/01", books: "1Sam:7-8,Jac:5,Ps:73" },
		{ date: "2/01", books: "1Sam:9-10,1Pet:1,Ps:74" },
		{ date: "3/01", books: "1Sam:11-12,1Pet:2,Ps:75" },
		{ date: "4/01", books: "1Sam:13-14,1Pet:3,Ps:76" },
		{ date: "5/01", books: "1Sam:15-16,1Pet:4,Ps:77" },
		{ date: "6/01", books: "1Sam:17-18,1Pet:5,Ps:78" },
		{ date: "7/01", books: "Is:7-9,Mt:2,Ps:109" },
		{ date: "8/01", books: "1Sam:19-20,2Pet:1,Ps:79" },
		{ date: "9/01", books: "1Sam:21-22,2Pet:2,Ps:80" },
		{ date: "10/01", books: "1Sam:23-24,2Pet:3,Ps:81" },
		{ date: "11/01", books: "1Sam:25-25,1Jn:1,Ps:82" },
		{ date: "12/01", books: "1Sam:27-28,1Jn:2,Ps:83" },
		{ date: "13/01", books: "1Sam:29-30,1Jn:3,Ps:84" },
		{ date: "14/01", books: "1Sam:31,2Sam:1,1Jn:4,Ps:85" },
		{ date: "15/01", books: "2Sam:2-3,1Jn:5,Ps:86" },
		{ date: "16/01", books: "2Sam:4-5,2Jn:1,Ps:87" },
		{ date: "17/01", books: "2Sam:6-7,3Jn:1,Ps:88" },
		{ date: "18/01", books: "2Sam:8-9,Juda:1,Ps:89" },
		{ date: "19/01", books: "2Sam:10-11,Rom:1,Ps:90" },
		{ date: "20/01", books: "2Sam:12-13,Rom:2,Ps:91" },
		{ date: "21/01", books: "2Sam:14-15,Rom:3,Ps:92" },
		{ date: "22/01", books: "2Sam:16-17,Rom:4,Ps:93" },
		{ date: "23/01", books: "2Sam:18-19,Rom:5,Ps:94" },
		{ date: "24/01", books: "2Sam:20-21,Rom:6,Ps:95" },
		{ date: "25/01", books: "2Sam:22-23,Rom:7,Ps:96" },
		{ date: "26/01", books: "2Sam:24,1King:1,Rom:8,Ps:97" },
		{ date: "27/01", books: "1King:2-3,Rom:9,Ps:98" },
		{ date: "28/01", books: "1King:4-5,Rom:10,Ps:99" },
		{ date: "29/01", books: "1King:6-7,Rom:11,Ps:100" },
		{ date: "30/01", books: "1King:8-9,Rom:12,Ps:101" },
		{ date: "31/01", books: "1King:10-11,Rom:13,Ps:102" },
		
		// February
		{ date: "1/02", books: "1King:12-13,Rom:14,Ps:103" },
		{ date: "2/02", books: "1King:14-15,Rom:15,Ps:104" },
		{ date: "3/02", books: "1King:16-17,Rom:16,Ps:105" },
		{ date: "4/02", books: "1King:18-19,1Cor:1,Ps:106" },
		{ date: "5/02", books: "1King:20-21,1Cor:2,Ps:107" },
		{ date: "6/02", books: "1King:22,2King:1,1Cor:3,Ps:108" },
		{ date: "7/02", books: "2King:2-3,1Cor:4,Ps:109" },
		{ date: "8/02", books: "2King:4-5,1Cor:5,Ps:110" },
		{ date: "9/02", books: "2King:6-7,1Cor:6,Ps:111" },
		{ date: "10/02", books: "2King:8-9,1Cor:7,Ps:112" },
		{ date: "11/02", books: "2King:10-11,1Cor:8,Ps:113" },
		{ date: "12/02", books: "2King:12-13,1Cor:9,Ps:114" },
		{ date: "13/02", books: "2King:14-15,1Cor:10,Ps:115" },
		{ date: "14/02", books: "2King:16-17,1Cor:11,Ps:116" },
		{ date: "15/02", books: "2King:18-19,1Cor:12,Ps:117" },
		{ date: "16/02", books: "2King:20-21,1Cor:13,Ps:118" },
		{ date: "17/02", books: "2King:22-23,1Cor:14,Ps:119" },
		{ date: "18/02", books: "2King:24-25,1Cor:15,Ps:120" },
		{ date: "19/02", books: "1Chron:1-2,1Cor:16,Ps:121" },
		{ date: "20/02", books: "1Chron:3-4,2Cor:1,Ps:122" },
		{ date: "21/02", books: "1Chron:5-6,2Cor:2,Ps:123" },
		{ date: "22/02", books: "1Chron:7-8,2Cor:3,Ps:124" },
		{ date: "23/02", books: "1Chron:9-10,2Cor:4,Ps:125" },
		{ date: "24/02", books: "1Chron:11-12,2Cor:5,Ps:126" },
		{ date: "25/02", books: "1Chron:13-14,2Cor:6,Ps:127" },
		{ date: "26/02", books: "1Chron:15-16,2Cor:7,Ps:128" },
		{ date: "27/02", books: "1Chron:17-18,2Cor:8,Ps:129" },
		{ date: "28/02", books: "1Chron:19-20,2Cor:9,Ps:130" }
		
	];
    
  $(function() {
    $("#datepicker").datepicker({
      onSelect: function(dateText) {
	generateLinks();      
      }
    });
            
    $("#datepicker").datepicker("setDate", new Date());
	
    generateLinks();	
  });
  
  function buildLink(name, chapter)
  {
    return "<a href=\"http://azbyka.ru/biblia/?" + name + "."+chapter+
      "&r\">http://azbyka.ru/biblia/?" + name + "." + chapter + "&r</a><br/>";
  }
  
  function generateLinks()
  {
    $("#links").text("");
    
    var selectedDate = $("#datepicker").datepicker( 'getDate' );
    
    for (var i = 0; i < reading.length; ++i) {
      var r = reading[i];

      var parts = r.date.split('/');
      var day = parseInt(parts[0]);
      var month = parseInt(parts[1]);	  
      if (day != selectedDate.getDate() || month - 1 != selectedDate.getMonth()) {
		// Wrong date
		continue;
      }
      
      books = r.books.split(',');
	  for (var j = 0; j < books.length; ++j) {
		var book = books[j];
		
		parts = book.split(':');
		var bookName = parts[0];
		
		var chapters = parts[1].split('-');
		for (var k = 0; k < chapters.length; ++k) {
			$("#links").append(buildLink(bookName, chapters[k]));
		}
	  }
    }   
  }
  
  </script>
</head>
<body>
 
<p>Date: <input type="text" id="datepicker"></p>
<p id="links"></p>
  
</body>
</html>