<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Bible Reader</title>
  <link rel="stylesheet" href="css/jquery-ui.css">
  <script src="js/jquery.js"></script>
  <script src="js/jquery-ui.js"></script>
  <script>
  var reading = 
	[
		// December
		{ date: "1/12", books: "Deut:29-30,Ps:41,Act:2" },
		{ date: "2/12", books: "Deut:31-32,Ps:42,Act:3" },
		{ date: "3/12", books: "Deut:33-34,Ps:43,Act:4" },
		{ date: "4/12", books: "Nav:1-2,Ps:44,Act:5" },
		{ date: "5/12", books: "Nav:3-4,Ps:45,Act:6" },
		{ date: "6/12", books: "Nav:5-6,Ps:46,Act:7" },
		{ date: "7/12", books: "Nav:7-8,Ps:47,Act:8" },
		{ date: "8/12", books: "Nav:9-10,Ps:48,Act:9" },
		{ date: "9/12", books: "Nav:11-12,Ps:49,Act:10" },
		{ date: "10/12", books: "Nav:13-14,Ps:50,Act:11" },
		{ date: "11/12", books: "Nav:15-16,Ps:51,Act:12" },
		{ date: "12/12", books: "Nav:17-18,Ps:52,Act:13" },
		{ date: "13/12", books: "Nav:19-20,Ps:53,Act:14" },
		{ date: "14/12", books: "Nav:21-22,Ps:54,Act:15" },
		{ date: "15/12", books: "Nav:23-24,Ps:55,Act:16" },
		{ date: "16/12", books: "Judg:1-2,Ps:56,Act:17" },
		{ date: "17/12", books: "Judg:3-4,Ps:57,Act:18" },
		{ date: "18/12", books: "Judg:5-6,Ps:58,Act:19" },
		{ date: "19/12", books: "Judg:7-8,Ps:59,Act:20" },
		{ date: "20/12", books: "Judg:9-10,Ps:60,Act:21" },
		{ date: "21/12", books: "Judg:11-12,Ps:61,Act:22" },
		{ date: "22/12", books: "Judg:13-14,Ps:62,Act:23" },
		{ date: "23/12", books: "Judg:15-16,Ps:64,Act:24" },
		{ date: "24/12", books: "Judg:17-18,Ps:65,Act:25" },
		{ date: "25/12", books: "Judg:19-20,Ps:66,Act:26" },
		{ date: "26/12", books: "Judg:21-22,Ps:67,Act:27" },
		{ date: "27/12", books: "Ruth:1-2,Ps:68,Act:28" },
		{ date: "28/12", books: "Ruth:3-4,Ps:69,Jac:1" },
		{ date: "29/12", books: "1Sam:1-2,Ps:70,Jac:2" },
		{ date: "30/12", books: "1Sam:3-4,Ps:71,Jac:3" },
		{ date: "31/12", books: "1Sam:5-6,Ps:72,Jac:4" }
	];
    
  $(function() {
    $("#datepicker").datepicker({
      onSelect: function(dateText) {
	generateLinks();      
      }
    });
            
    $("#datepicker").datepicker("setDate", new Date());
	
    generateLinks();	
  });
  
  function buildLink(name, chapter)
  {
    return "<a href=\"http://azbyka.ru/biblia/?" + name + "."+chapter+
      "\">http://azbyka.ru/biblia/?" + name + "." + chapter + "</a><br/>";
  }
  
  function generateLinks()
  {
    $("#links").text("");
    
    var selectedDate = $("#datepicker").datepicker( 'getDate' );
    
    for (var i = 0; i < reading.length; ++i) {
      var r = reading[i];

      var parts = r.date.split('/');
      var day = parseInt(parts[0]);
      var month = parseInt(parts[1]);	  
      if (day != selectedDate.getDate() || month - 1 != selectedDate.getMonth()) {
		// Wrong date
		continue;
      }
      
      books = r.books.split(',');
	  for (var j = 0; j < books.length; ++j) {
		var book = books[j];
		
		parts = book.split(':');
		var bookName = parts[0];
		
		var chapters = parts[1].split('-');
		for (var k = 0; k < chapters.length; ++k) {
			$("#links").append(buildLink(bookName, chapters[k]));
		}
	  }
    }   
  }
  
  </script>
</head>
<body>
 
<p>Date: <input type="text" id="datepicker"></p>
<p id="links"></p>
  
</body>
</html>